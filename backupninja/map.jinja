
{% set client = salt['grains.filter_by']({
  'Debian': {
    'pkgs': ['backupninja', 'debconf-utils'],
    'service': 'backupninja',
    'report_email': 'root',
    'config': '/etc/default/backupninja',
    'cacert_file': '/etc/ssl/certs/ca-certificates.crt',
  },
  'RedHat': {
    'pkgs': ['backupninja'],
    'service': 'backupninja',
    'report_email': 'root',
    'config': '/etc/sysconfig/backupninja',
    'cacert_file': '/etc/pki/tls/certs/ca-bundle.crt',
  },
}, merge=salt['pillar.get']('backupninja:client')) %}

{% set server = salt['grains.filter_by']({
  'Debian': {
    'pkgs': ['rsync'],
    'home_dir': '/srv/backupninja',
    'keys': [],
  },
  'RedHat': {
    'pkgs': ['rsync'],
    'home_dir': '/srv/backupninja',
    'keys': [],
  },
}, merge=salt['pillar.get']('backupninja:server')) %}
